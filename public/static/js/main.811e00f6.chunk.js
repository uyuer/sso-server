(this["webpackJsonpsso-front"]=this["webpackJsonpsso-front"]||[]).push([[0],{237:function(e,t,a){},241:function(e,t,a){e.exports={button:"style_button__2GO7h",draw:"style_draw__c4yQo",meet:"style_meet__21nBa",center:"style_center__1OJVS",circle:"style_circle__4A4xb",ghost:"style_ghost__3BqLq",noGhost:"style_noGhost__lwXve",large:"style_large__2LYD5",normal:"style_normal__299K_",small:"style_small__OUoz0",bg:"style_bg__1riEa",formContent:"style_formContent__RsF6F",inputStyle:"style_inputStyle__3P7sF",spaceBetween:"style_spaceBetween__28en7",title:"style_title__2EAfR",extra:"style_extra__2FLxo",search:"style_search__1u_xm",label:"style_label__1wXeJ",scrollYBar:"style_scrollYBar__TfRfY",extend:"style_extend__h-lwK"}},242:function(e,t,a){e.exports={button:"style_button__33QVy",draw:"style_draw__3A-P6",meet:"style_meet__3ViBW",center:"style_center__3AO65",circle:"style_circle__2qvsO",ghost:"style_ghost__Y02C0",noGhost:"style_noGhost__2r5RC",large:"style_large__1zicu",normal:"style_normal__ir2cP",small:"style_small__3hhfE",bg:"style_bg__1rg7P",formContent:"style_formContent__277zt",inputStyle:"style_inputStyle__c5lr5",spaceBetween:"style_spaceBetween__2SrbV",title:"style_title__2P89W",extra:"style_extra__tPe95",search:"style_search__1usLd",label:"style_label__1hjFh",scrollYBar:"style_scrollYBar__1L1Dj",link:"style_link__Tu0aH"}},243:function(e,t,a){e.exports={button:"style_button__3xPGo",draw:"style_draw__5qdBj",meet:"style_meet__TF2mT",center:"style_center__3o3uc",circle:"style_circle__2JZYx",ghost:"style_ghost__13gE7",noGhost:"style_noGhost__3hL6b",large:"style_large__30NdP",normal:"style_normal__3J5jc",small:"style_small__zTHDg",bg:"style_bg__3ugeA",formContent:"style_formContent__nRajL",inputStyle:"style_inputStyle__1m0j1",spaceBetween:"style_spaceBetween__2zR6I",title:"style_title__3AGx8",extra:"style_extra__10-hv",search:"style_search__1eArS",label:"style_label__3kwMa",scrollYBar:"style_scrollYBar__3poIA",content:"style_content__AWF-v"}},249:function(e,t,a){e.exports=a(475)},285:function(e,t){},287:function(e,t){},298:function(e,t){},300:function(e,t){},327:function(e,t){},329:function(e,t){},330:function(e,t){},335:function(e,t){},337:function(e,t){},356:function(e,t){},368:function(e,t){},371:function(e,t){},475:function(e,t,a){"use strict";a.r(t);var n=a(232),l=a(0),r=a.n(l),s=a(29),o=a.n(s),c=a(91),i=a(233),_=a(237),m=a.n(_);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(255);var u=a(16),y=a(90),f=a(18),p=a(245),d=a.n(p),b=(a(97),a(38)),g=a(44),h=a(35);function E(){return localStorage.getItem("token")}function w(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]}var v=a(150),x=a.n(v),S=a(238),O=a.n(S),j=x.a.create({paramsSerializer:function(e){return O.a.stringify(e)}});j.interceptors.request.use((function(e){"get"===e.method&&(e.params=e.data),e.headers["content-type"]||(e.headers["content-type"]="application/json;charset=UTF-8");var t=localStorage.getItem("token");return e.headers.common.Authorization="Bearer "+t,e}),(function(e){return Promise.reject(e)})),j.interceptors.response.use((function(e){return e.status,e.data}),(function(e){if(x.a.isCancel(e))return Promise.reject(e);if(e.response){var t=e.response,a=t.data,n=t.status,l=t.statusText,r=a||{},s=r.message;if(401===r.code)return window.localStorage.removeItem("token"),b.b.error("\u7528\u6237\u672a\u767b\u5f55, \u8bf7\u5148\u767b\u5f55",1.5,(function(){return window.location.href="".concat(window.location.hash?"#":"","/login")}));b.b.error(n+" "+(s||l))}return Promise.reject(e)})),j.uploadFile=function(e,t,a){var n=new FormData;for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&n.set(l,t[l]);return j(Object(h.a)({method:"POST",data:n},a))};var C=j,k={sso:{login:"POST /login",logout:"POST /logout",doLogin:"POST /doLogin"}},I=function(e,t){var a=e.split(" "),n=Object(g.a)(a,2),l=n[0],r=n[1],s={};return l=l.toLowerCase(),r&&(r="/sso"+r),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C(Object(h.a)(Object(h.a)({url:r,data:e,method:l},s),t))}};for(var B in k)for(var N in k[B])k[B][N]=I(k[B][N]);var P=k,L=r.a.createContext({});function T(e){var t=!!E(),a=Object(l.useState)(t),n=Object(g.a)(a,2),r=n[0],s=n[1],o=Object(l.useState)(!1),c=Object(g.a)(o,2),i=c[0],_=c[1];return{logged:r,loggedChange:s,globalLoading:i,setGlobalLoading:_,logout:function(e){console.log("\u9000\u51fa"),P.sso.logout().then((function(e){b.b.success("\u5df2\u9000\u51fa")})).finally((function(){s(!1),localStorage.removeItem("token"),e&&e()}))}}}a(122);var F=a(61),Y=(a(167),a(54)),G=(a(231),a(23)),R=a(477),q=a(478),A=a(81),z=a.n(A),H=a(58),W=a.n(H),J=a(246),V=a(5),U=a.n(V),Q=a(241),D=a.n(Q);function Z(e){e.children;var t=e.className,a=e.style,n=e.display,l=void 0===n?"block":n,s=Object(J.a)(e,["children","className","style","display"]),o={block:{display:"block"},inlineBlock:{display:"inline-block"},inline:{display:"inline"}}[l];return r.a.createElement("h1",Object.assign({className:U()(D.a.title,t),style:Object(h.a)(Object(h.a)({},o),a)},s),"\u5e7d\u94a5\u7684\u5c0f\u7834\u7ad9")}a(397);var X=a(247),K=a(242),M=a.n(K);function $(e){var t=Object(f.f)(),a=E(),n=Object(l.useContext)(L).logout,s=e.direction,o=void 0===s?"horizontal":s,c=e.split,i=void 0===c?"/":c,_=e.size,m=void 0===_?"small":_,u=e.theme,p=void 0===u?"blue":u,d=e.style,b=void 0===d?{}:d,g=e.className,v=void 0===g?"":g,x=w(p).toLowerCase(),S={blue:{default:{color:"#1890ff",fontWeight:"bold"},active:{color:"#3b5f70",fontWeight:"bold"}},write:{default:{color:"#ffffff",fontWeight:"bold"},active:{color:"#3b5f70",fontWeight:"bold"}}},O={string:S[p],object:Object(h.a)(Object(h.a)({},S.blue),p)}[x],j=function(){n((function(){t.push("/home")}))},C=[{name:"\u9996\u9875",to:"/home"},{name:"\u4e2a\u4eba\u4e2d\u5fc3",to:"/user"},{name:"\u8d26\u53f7\u7ba1\u7406",to:"/accounts"},{name:"\u8d26\u672c\u7ba1\u7406",to:"/ledgers"}].concat(a?[{name:"\u9000\u51fa"}]:[{name:"\u767b\u5f55",to:"/login"},{name:"\u6ce8\u518c",to:"/register"}]),k=r.a.createElement("span",{style:O.default},i);return r.a.createElement("div",{className:U()(M.a.link,v),style:b},r.a.createElement(X.b,{direction:o,split:k,size:m},C.map((function(e){return e.to?r.a.createElement(y.b,{style:O.default,activeStyle:O.active,to:e.to,key:e.name},e.name):r.a.createElement("button",{style:O.default,key:e.name,onClick:j},"\u9000\u51fa")}))))}var ee=a(243),te=a.n(ee);function ae(){return r.a.createElement("div",{className:te.a.content},r.a.createElement("span",null,"\u5e7d\u94a5\u7684\u7f51\u7edc\u6280\u672f\u63a2\u7d22"),r.a.createElement("span",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://beian.miit.gov.cn/"},"\u8700ICP\u590718009291\u53f7")))}var ne={labelCol:{md:{span:6},sm:{span:6},xs:{span:24}},wrapperCol:{md:{span:18},sm:{span:18},xs:{span:24}}},le={wrapperCol:{md:{offset:6,span:18},sm:{offset:6,span:18},xs:{offset:0,span:24}}};var re=a(95),se=a.n(re),oe=(a(469),a(96)),ce=a(153),ie=a(479),_e=a(48),me=a.n(_e),ue={labelCol:{md:{span:6},sm:{span:6},xs:{span:24}},wrapperCol:{md:{span:18},sm:{span:18},xs:{span:24}}},ye={wrapperCol:{md:{offset:6,span:18},sm:{offset:6,span:18},xs:{offset:0,span:24}}};var fe,pe=[{path:"login",name:"\u767b\u9646",component:function(e){var t=Object(l.useContext)(L).loggedChange,a=Object(l.useRef)(),n=Object(l.useState)(!1),s=Object(g.a)(n,2),o=s[0],c=s[1],i=new URLSearchParams(window.location.search).get("serviceURL"),_=localStorage.getItem("user"),m={username:(_?JSON.parse(_):{}).email};return Object(l.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("serviceURL");P.sso.doLogin({serviceURL:e}).then((function(e){t(!0);var a=e.data;a&&(window.location.href=a)})).catch((function(e){t(!1)}))}),[t]),r.a.createElement("div",{className:W.a.container},r.a.createElement("div",{className:W.a.content},r.a.createElement("div",{className:W.a.formContent},r.a.createElement(G.a,Object.assign({},ne,{onFinish:function(e){var a=e.username,n=e.password,l={username:a,password:z.a.SHA256(n,n).toString(),serviceURL:i||""};o||(c(!0),P.sso.login(l).then((function(e){e&&(t(!0),b.b.success("\u767b\u5f55\u6210\u529f, \u5373\u5c06\u8df3\u8f6c..",1.5,(function(){var t=e.data;t&&(window.location.href=t)})))})).catch((function(e){t(!1)})).finally((function(){c(!1)})))},initialValues:m,ref:a}),r.a.createElement(G.a.Item,le,r.a.createElement(Z,null)),r.a.createElement(G.a.Item,le,r.a.createElement($,null)),r.a.createElement(G.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],extra:"\u53ef\u4f7f\u7528\u90ae\u7bb1\u6216\u7528\u6237\u540d\u767b\u5f55"},r.a.createElement(Y.a,{className:W.a.inputStyle,placeholder:"\u8f93\u5165\u7528\u6237\u540d",prefix:r.a.createElement(R.a,{style:{color:"rgba(0,0,0,.25)"}})})),r.a.createElement(G.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],extra:"\u5bc6\u7801\u5c06\u4f1a\u4ee5\u8f93\u5165\u7684\u5bc6\u7801\u4e3a\u52a0\u5bc6\u5bc6\u94a5\u4f7f\u7528SHA256\u65b9\u5f0f\u52a0\u5bc6"},r.a.createElement(Y.a.Password,{className:W.a.inputStyle,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",prefix:r.a.createElement(q.a,{style:{color:"rgba(0,0,0,.25)"}})})),r.a.createElement(G.a.Item,le,r.a.createElement(F.a,{htmlType:"submit",type:"primary",loading:o,disabled:o,className:W.a.inputStyle},"\u767b\u5f55"))))),r.a.createElement("div",{className:W.a.footer},r.a.createElement(ae,null)))},exact:!0},{path:"register",name:"\u6ce8\u518c",component:function(e){var t=Object(l.useRef)(),a=Object(l.useState)(59),n=Object(g.a)(a,2),s=n[0],o=n[1],c=Object(l.useState)(!1),i=Object(g.a)(c,2),_=i[0],m=i[1],u=Object(l.useState)(!1),y=Object(g.a)(u,2),f=y[0],p=y[1],d=Object(l.useState)(!1),h=Object(g.a)(d,2),E=h[0],w=h[1];function v(){return(v=Object(ce.a)(se.a.mark((function e(a){var n,l;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.current.validateFields,e.next=3,n(["email"]);case 3:if(l=e.sent,!_){e.next=6;break}return e.abrupt("return");case 6:m(!0),P.ordinary.sendCode(l).then((function(e){console.log(e,"register-\u7528\u6237\u6ce8\u518c->\u53d1\u9001\u9a8c\u8bc1\u7801"),e&&(b.b.success("\u90ae\u4ef6\u5df2\u53d1\u9001,30\u5206\u949f\u4ee5\u5185\u6709\u6548"),m(!1),p(!0),S(s,(function(e){e>=0&&o(e),e<=0&&setTimeout((function(){o(59),p(!1)}),1e3)})))})).finally((function(){m(!1)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(ce.a)(se.a.mark((function t(a){var n,l,r,s,o,c,i;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(z.a.SHA256("123456","123456").toString()),n=a.username,l=a.password,r=a.repassword,s=a.male,o=a.email,c=a.code,l===r){t.next=4;break}return t.abrupt("return",b.b.info("\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4"));case 4:if(i={username:n,password:z.a.SHA256(l,l).toString(),repassword:z.a.SHA256(r,r).toString(),male:s,email:o,code:c},!E){t.next=7;break}return t.abrupt("return");case 7:w(!0),P.ordinary.register(i).then((function(t){console.log(t,"register-\u7528\u6237\u6ce8\u518c->\u8bf7\u6c42\u7ed3\u679c"),t&&(b.b.success("\u6ce8\u518c\u6210\u529f"),window.localStorage.setItem("user",JSON.stringify({username:n,email:o})),e.history.push("/login"))})).finally((function(){w(!1)}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S=Object(l.useCallback)((function(){return function(e,t){e<=0||setTimeout((function(){e--,t(e),t(e,t)}),1e3)}}),[s]);return Object(l.useEffect)((function(){f&&S(s,o)}),[f,S,s]),r.a.createElement("div",{className:me.a.container},r.a.createElement("div",{className:me.a.content},r.a.createElement("div",{className:me.a.formContent},r.a.createElement(G.a,Object.assign({},ue,{onFinish:function(e){return x.apply(this,arguments)},onFinishFailed:function(e){console.log(e)},initialValues:{male:"2"},ref:t}),r.a.createElement(G.a.Item,ye,r.a.createElement(Z,null)),r.a.createElement(G.a.Item,ye,r.a.createElement($,null)),r.a.createElement(G.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]},r.a.createElement(Y.a,{className:me.a.inputStyle,placeholder:"\u8f93\u5165\u7528\u6237\u540d",prefix:r.a.createElement(R.a,{style:{color:"rgba(0,0,0,.25)"}})})),r.a.createElement(G.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]},r.a.createElement(Y.a.Password,{className:me.a.inputStyle,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",prefix:r.a.createElement(q.a,{style:{color:"rgba(0,0,0,.25)"}})})),r.a.createElement(G.a.Item,{label:"\u91cd\u590d\u5bc6\u7801",name:"repassword",rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]},r.a.createElement(Y.a.Password,{className:me.a.inputStyle,placeholder:"\u8bf7\u91cd\u590d\u5bc6\u7801",prefix:r.a.createElement(q.a,{style:{color:"rgba(0,0,0,.25)"}})})),r.a.createElement(G.a.Item,{label:"\u6027\u522b",name:"male",rules:[{required:!1}]},r.a.createElement(oe.a.Group,null,r.a.createElement(oe.a,{value:"2"},"\u4fdd\u5bc6"),r.a.createElement(oe.a,{value:"1"},"\u7537"),r.a.createElement(oe.a,{value:"0"},"\u5973"))),r.a.createElement(G.a.Item,{label:"\u90ae\u7bb1",name:"email",rules:[{required:!0,message:"\u8bf7\u8f93\u5165"},{type:"email",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u683c\u5f0f"}]},r.a.createElement(Y.a,{className:me.a.inputStyle,placeholder:"\u8f93\u5165\u90ae\u7bb1",prefix:r.a.createElement(ie.a,{style:{color:"rgba(0,0,0,.25)"}})})),r.a.createElement(G.a.Item,{label:"\u90ae\u7bb1\u9a8c\u8bc1\u7801",extra:"\u9700\u8981\u9a8c\u8bc1\u60a8\u7684\u90ae\u7bb1\u6765\u786e\u4fdd\u4e0d\u4f1a\u6076\u610f\u6ce8\u518c"},r.a.createElement(G.a.Item,{name:"code",noStyle:!0,rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]},r.a.createElement(Y.a,{placeholder:"\u8f93\u5165\u9a8c\u8bc1\u7801",style:{width:100}})),r.a.createElement(F.a,{style:{marginLeft:"10px",width:"100px"},disabled:f||E,loading:_,onClick:function(e){return v.apply(this,arguments)}},f?s+"\u79d2":"\u83b7\u53d6")),r.a.createElement(G.a.Item,ye,r.a.createElement(F.a,{htmlType:"submit",type:"primary",loading:E,disabled:E,className:me.a.inputStyle},"\u6ce8\u518c"))))),r.a.createElement("div",{className:me.a.footer},r.a.createElement(ae,null)))},exact:!0}],de=function(){return r.a.createElement(L.Provider,{value:T()},r.a.createElement(u.a,{locale:d.a},r.a.createElement(y.a,null,r.a.createElement(f.c,null,pe.map((function(e){return r.a.createElement(f.a,{key:e.path,exact:e.exact,path:"/".concat(e.path),component:e.component})}))))))},be=Object(c.a)(fe||(fe=Object(n.a)(["\n  ","\n  ","\n  /* other styles */\n"])),i.a,m.a);o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null),r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e,t,a){e.exports={button:"style_button__3Q_Yu",draw:"style_draw__2_RF_",meet:"style_meet__226wm",center:"style_center__7p6g4",circle:"style_circle__3yP71",ghost:"style_ghost__Qy-fS",noGhost:"style_noGhost__1OQ_g",large:"style_large__3EGn6",normal:"style_normal__8cyXP",small:"style_small__3kjmI",bg:"style_bg__3LN5H",formContent:"style_formContent__3Trqc",inputStyle:"style_inputStyle__1631C",spaceBetween:"style_spaceBetween__3n14w",title:"style_title__2IT6o",extra:"style_extra__3q0p1",search:"style_search__3MgnZ",label:"style_label__2sFlB",scrollYBar:"style_scrollYBar__9yTvO",container:"style_container__2yxCv",footer:"style_footer__EnHI5",content:"style_content__2HZEZ"}},58:function(e,t,a){e.exports={button:"style_button__eJ6GL",draw:"style_draw__12Spy",meet:"style_meet__2ntop",center:"style_center__2Cw_Y",circle:"style_circle__22NIV",ghost:"style_ghost__3PLtH",noGhost:"style_noGhost__QQdsn",large:"style_large__2xlC-",normal:"style_normal__7qx2S",small:"style_small__2n2G-",bg:"style_bg__YeW46",formContent:"style_formContent__2cCTR",inputStyle:"style_inputStyle__29hVD",spaceBetween:"style_spaceBetween__1EseJ",title:"style_title__10XEE",extra:"style_extra__3VT68",search:"style_search__1aZWw",label:"style_label__3Icd7",scrollYBar:"style_scrollYBar__3FaRE",container:"style_container__28zTe",footer:"style_footer__2lbY9",content:"style_content__3aaYe"}}},[[249,1,2]]]);
//# sourceMappingURL=main.811e00f6.chunk.js.map